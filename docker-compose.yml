version: '3'

services:
  map_tiles_downloader:
    build: .
    image: registry.michaltorma.com/map_tiles_downloader:latest
    ports:
      - "8888:8888"
    environment:
      - ZOOM=14
      - URL=https://heatmap-external-{server}.strava.com/tiles-auth/all/gray/{z}/{x}/{y}.png?Key-Pair-Id=APKAIDPUN4QMG7VUQPSA&Policy=eyJTdGF0ZW1lbnQiOiBbeyJSZXNvdXJjZSI6Imh0dHBzOi8vaGVhdG1hcC1leHRlcm5hbC0qLnN0cmF2YS5jb20vKiIsIkNvbmRpdGlvbiI6eyJEYXRlTGVzc1RoYW4iOnsiQVdTOkVwb2NoVGltZSI6MTY3ODUyNjMzN30sIkRhdGVHcmVhdGVyVGhhbiI6eyJBV1M6RXBvY2hUaW1lIjoxNjc3MzAyMzM3fX19XX0_&Signature=naYBzjrIAI8~TY9VEX1-dO3BIUWKTyz-2L-~OPp-oAhEGAvzIUFKZ63rWGz7zcclub~XF4Y3veQmle7Doyhetv-g2D5kW5kGSrmMxIzOhYYStd3R5~glmNEHl-WEmq7UqJ4iQjGP16M~2Gp0MnHmFyH8FB5VX~z8s5603O3IBbXcvNxTBdhIerCWZ0L~1fD2Uti8tR45KoctySD~N4sM9Gdvk3i6NMWx6U2xKD70aVKqKCxC72bTqpGsY5PCWryP9GRBkTNyj-tnBexQyN2ZWVTks81zvoLDUlI0-valrSEXwoBx7AdBtXLqQN7BaNTCtQ3jt~F7vElyDBuaU4S2uw__
    volumes:
      - ./app:/home/user/app
    # mem_reservation: 10Gi
    # cpu_count: 3
