version: '3'

services:
  map_tiles_downloader:
    build: .
    image: registry.michaltorma.com/map_tiles_downloader:latest
    ports:
      - "8888:8888"
    environment:
      - ZOOM=14
      - URL=https://heatmap-external-{server}.strava.com/tiles-auth/all/gray/{z}/{x}/{y}.png?Key-Pair-Id=APKAIDPUN4QMG7VUQPSA&Policy=eyJTdGF0ZW1lbnQiOiBbeyJSZXNvdXJjZSI6Imh0dHBzOi8vaGVhdG1hcC1leHRlcm5hbC0qLnN0cmF2YS5jb20vKiIsIkNvbmRpdGlvbiI6eyJEYXRlTGVzc1RoYW4iOnsiQVdTOkVwb2NoVGltZSI6MTY5MTA1MDc3MX0sIkRhdGVHcmVhdGVyVGhhbiI6eyJBV1M6RXBvY2hUaW1lIjoxNjg5ODI2NzcxfX19XX0_&Signature=YO165hjX0HAJJffMC-pT5gVUU54Cr-1aEFeBjc-LH2364MUfP3FHQvuhKgg92VJS2XgZ6moIy6Ln2I8yUWGJMWeng-VP3UoLVWS0E7x0tra3boHBBQCa4~0nwa3ntYz8UcKPDRP2ZfLy8diJ0TyszPZl3Snt7Nun9xp8K3j0wkp2webj3TwZR-LA~Y1Z5A9X-DtiI-rYs8bHrPM-7yN1tOecnCHemCel5R5V2psTmzFzaKSyw5T81lB2qZCAJKLVu4eaKkNHRfdRTLe5OK28EYIfm5Eb9aquYHQSv1FcYGH192gBR6afbvSGdR8sgKLhryEI2oTycWA3T0YXR3gOnQ__
    command: ["tail", "-f", "/dev/null"]
    volumes:
      - ./app:/home/user/app
    # mem_reservation: 10Gi
    # cpu_count: 3
